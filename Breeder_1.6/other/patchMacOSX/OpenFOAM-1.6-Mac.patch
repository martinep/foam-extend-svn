diff --git a/.build b/.build
index 1ce203a..2668886 100644
--- a/.build
+++ b/.build
@@ -1 +1 @@
-1.6-f802ff2d6c5a
+1.6-4abb5974499d
diff --git a/.gitattributes b/.gitattributes
new file mode 100644
index 0000000..05813af
--- /dev/null
+++ b/.gitattributes
@@ -0,0 +1,2 @@
+MacPatches/* -diff
+wmake/src/lex.yy.c -diff
diff --git a/.gitignore b/.gitignore
index 0639d63..44a6818 100644
--- a/.gitignore
+++ b/.gitignore
@@ -41,6 +41,8 @@ linuxming*/
 SiCortex*Gcc*/
 solaris*Gcc*/
 SunOS*Gcc*/
+darwin*Opt*/
+darwin*Debug*/
 
 # doxygen generated documentation
 doc/[Dd]oxygen/html
@@ -57,6 +59,8 @@ doc/[Dd]oxygen/man
 *.tgz
 *.gtgz
 
+*.rej
+
 # ignore the persistent .build tag in the main directory
 /.build
 
@@ -66,4 +70,6 @@ doc/[Dd]oxygen/man
 # ignore .tags in the main directory
 /.tags
 
+wmake/bin/
+
 # end-of-file
diff --git a/Allwmake.noThird b/Allwmake.noThird
new file mode 100755
index 0000000..6516409
--- /dev/null
+++ b/Allwmake.noThird
@@ -0,0 +1,19 @@
+#!/bin/sh
+cd ${0%/*} || exit 1    # run from this directory
+set -x
+
+# wmake is required for subsequent targets
+( cd wmake/src && make )
+
+# build ThirdParty sources
+#( cd $WM_THIRD_PARTY_DIR && ./Allwmake )
+
+src/Allwmake
+applications/Allwmake
+
+if [ "$1" = doc ]
+then
+    doc/Allwmake
+fi
+
+# ----------------------------------------------------------------- end-of-file
diff --git a/MacPatches/OpenFOAM-1.6-Mac.patch.v1 b/MacPatches/OpenFOAM-1.6-Mac.patch.v1
new file mode 100644
index 0000000..c1018d1
Binary files /dev/null and b/MacPatches/OpenFOAM-1.6-Mac.patch.v1 differ
diff --git a/MacPatches/ThirdParty-1.6.-Mac.patch.v1 b/MacPatches/ThirdParty-1.6.-Mac.patch.v1
new file mode 100644
index 0000000..cc1e254
Binary files /dev/null and b/MacPatches/ThirdParty-1.6.-Mac.patch.v1 differ
diff --git a/applications/solvers/combustion/PDRFoam/Make/options b/applications/solvers/combustion/PDRFoam/Make/options
index 4e5b8fb..2f1a3cd 100644
--- a/applications/solvers/combustion/PDRFoam/Make/options
+++ b/applications/solvers/combustion/PDRFoam/Make/options
@@ -21,6 +21,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lengine \
     -lmeshTools \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lbasicThermophysicalModels \
     -lreactionThermophysicalModels \
diff --git a/applications/solvers/combustion/XiFoam/Make/options b/applications/solvers/combustion/XiFoam/Make/options
index c328b2c..66dae7f 100644
--- a/applications/solvers/combustion/XiFoam/Make/options
+++ b/applications/solvers/combustion/XiFoam/Make/options
@@ -10,6 +10,7 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lengine \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lbasicThermophysicalModels \
diff --git a/applications/solvers/combustion/coldEngineFoam/Make/options b/applications/solvers/combustion/coldEngineFoam/Make/options
index 53aa22b..dfd9248 100644
--- a/applications/solvers/combustion/coldEngineFoam/Make/options
+++ b/applications/solvers/combustion/coldEngineFoam/Make/options
@@ -10,6 +10,7 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lengine \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lbasicThermophysicalModels \
diff --git a/applications/solvers/combustion/dieselEngineFoam/Make/options b/applications/solvers/combustion/dieselEngineFoam/Make/options
index 6055851..d0a572b 100644
--- a/applications/solvers/combustion/dieselEngineFoam/Make/options
+++ b/applications/solvers/combustion/dieselEngineFoam/Make/options
@@ -18,6 +18,7 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lengine \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lreactionThermophysicalModels \
diff --git a/applications/solvers/combustion/dieselFoam/Make/options b/applications/solvers/combustion/dieselFoam/Make/options
index 28605eb..9096934 100644
--- a/applications/solvers/combustion/dieselFoam/Make/options
+++ b/applications/solvers/combustion/dieselFoam/Make/options
@@ -16,6 +16,7 @@ EXE_INC = \
     -I$(LIB_SRC)/ODE/lnInclude
 
 EXE_LIBS = \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lreactionThermophysicalModels \
diff --git a/applications/solvers/combustion/engineFoam/Make/options b/applications/solvers/combustion/engineFoam/Make/options
index 31775e0..cf5fa5f 100644
--- a/applications/solvers/combustion/engineFoam/Make/options
+++ b/applications/solvers/combustion/engineFoam/Make/options
@@ -10,6 +10,7 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lengine \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lbasicThermophysicalModels \
diff --git a/applications/solvers/combustion/reactingFoam/Make/options b/applications/solvers/combustion/reactingFoam/Make/options
index e982f63..731a234 100644
--- a/applications/solvers/combustion/reactingFoam/Make/options
+++ b/applications/solvers/combustion/reactingFoam/Make/options
@@ -9,6 +9,7 @@ EXE_INC = \
     -I$(LIB_SRC)/finiteVolume/lnInclude
 
 EXE_LIBS = \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lreactionThermophysicalModels \
diff --git a/applications/solvers/combustion/rhoReactingFoam/Make/options b/applications/solvers/combustion/rhoReactingFoam/Make/options
index e982f63..731a234 100644
--- a/applications/solvers/combustion/rhoReactingFoam/Make/options
+++ b/applications/solvers/combustion/rhoReactingFoam/Make/options
@@ -9,6 +9,7 @@ EXE_INC = \
     -I$(LIB_SRC)/finiteVolume/lnInclude
 
 EXE_LIBS = \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lreactionThermophysicalModels \
diff --git a/applications/solvers/compressible/rhoPimpleFoam/Make/options b/applications/solvers/compressible/rhoPimpleFoam/Make/options
index 4858e53..47a62ae 100644
--- a/applications/solvers/compressible/rhoPimpleFoam/Make/options
+++ b/applications/solvers/compressible/rhoPimpleFoam/Make/options
@@ -7,6 +7,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lbasicThermophysicalModels \
     -lspecie \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/compressible/rhoPisoFoam/Make/options b/applications/solvers/compressible/rhoPisoFoam/Make/options
index 5c62488..8ef0951 100644
--- a/applications/solvers/compressible/rhoPisoFoam/Make/options
+++ b/applications/solvers/compressible/rhoPisoFoam/Make/options
@@ -9,5 +9,6 @@ EXE_LIBS = \
     -lmeshTools \
     -lbasicThermophysicalModels \
     -lspecie \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels
diff --git a/applications/solvers/compressible/sonicDyMFoam/Make/options b/applications/solvers/compressible/sonicDyMFoam/Make/options
index f05f52d..81495fb 100644
--- a/applications/solvers/compressible/sonicDyMFoam/Make/options
+++ b/applications/solvers/compressible/sonicDyMFoam/Make/options
@@ -9,6 +9,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lbasicThermophysicalModels \
     -lspecie \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/compressible/sonicFoam/Make/options b/applications/solvers/compressible/sonicFoam/Make/options
index ecfde60..a5b9436 100644
--- a/applications/solvers/compressible/sonicFoam/Make/options
+++ b/applications/solvers/compressible/sonicFoam/Make/options
@@ -6,6 +6,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lbasicThermophysicalModels \
     -lspecie \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/heatTransfer/buoyantPisoFoam/Make/options b/applications/solvers/heatTransfer/buoyantPisoFoam/Make/options
index f26563f..8d01214 100644
--- a/applications/solvers/heatTransfer/buoyantPisoFoam/Make/options
+++ b/applications/solvers/heatTransfer/buoyantPisoFoam/Make/options
@@ -7,6 +7,7 @@ EXE_LIBS = \
     -lmeshTools \
     -lbasicThermophysicalModels \
     -lspecie \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/heatTransfer/chtMultiRegionFoam/Make/options b/applications/solvers/heatTransfer/chtMultiRegionFoam/Make/options
index 12316d6..eda4dfc 100644
--- a/applications/solvers/heatTransfer/chtMultiRegionFoam/Make/options
+++ b/applications/solvers/heatTransfer/chtMultiRegionFoam/Make/options
@@ -10,6 +10,8 @@ EXE_INC = \
 EXE_LIBS = \
     -lbasicThermophysicalModels \
     -lspecie \
+    -lmeshTools \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/incompressible/pimpleDyMFoam/Make/options b/applications/solvers/incompressible/pimpleDyMFoam/Make/options
index e14eec2..7f83ff2 100644
--- a/applications/solvers/incompressible/pimpleDyMFoam/Make/options
+++ b/applications/solvers/incompressible/pimpleDyMFoam/Make/options
@@ -12,6 +12,7 @@ EXE_LIBS = \
     -ldynamicMesh \
     -lmeshTools \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/incompressible/pimpleFoam/Make/options b/applications/solvers/incompressible/pimpleFoam/Make/options
index d0e8dd7..47d95d9 100644
--- a/applications/solvers/incompressible/pimpleFoam/Make/options
+++ b/applications/solvers/incompressible/pimpleFoam/Make/options
@@ -6,6 +6,7 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/incompressible/pisoFoam/Make/options b/applications/solvers/incompressible/pisoFoam/Make/options
index 419f1ff..259f95f 100644
--- a/applications/solvers/incompressible/pisoFoam/Make/options
+++ b/applications/solvers/incompressible/pisoFoam/Make/options
@@ -5,6 +5,7 @@ EXE_INC = \
     -I$(LIB_SRC)/finiteVolume/lnInclude
 
 EXE_LIBS = \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lincompressibleTransportModels \
diff --git a/applications/solvers/lagrangian/coalChemistryFoam/Make/options b/applications/solvers/lagrangian/coalChemistryFoam/Make/options
index b7abd77..6fca569 100644
--- a/applications/solvers/lagrangian/coalChemistryFoam/Make/options
+++ b/applications/solvers/lagrangian/coalChemistryFoam/Make/options
@@ -21,6 +21,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lfiniteVolume \
     -lmeshTools \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -llagrangian \
diff --git a/applications/solvers/lagrangian/porousExplicitSourceReactingParcelFoam/Make/options b/applications/solvers/lagrangian/porousExplicitSourceReactingParcelFoam/Make/options
index 76bc8b0..25b61fb 100644
--- a/applications/solvers/lagrangian/porousExplicitSourceReactingParcelFoam/Make/options
+++ b/applications/solvers/lagrangian/porousExplicitSourceReactingParcelFoam/Make/options
@@ -21,6 +21,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lfiniteVolume \
     -lmeshTools \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -llagrangian \
diff --git a/applications/solvers/lagrangian/reactingParcelFoam/Make/options b/applications/solvers/lagrangian/reactingParcelFoam/Make/options
index d10253a..43ea6f2 100644
--- a/applications/solvers/lagrangian/reactingParcelFoam/Make/options
+++ b/applications/solvers/lagrangian/reactingParcelFoam/Make/options
@@ -20,6 +20,7 @@ EXE_INC = \
 EXE_LIBS = \
     -lfiniteVolume \
     -lmeshTools \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -llagrangian \
diff --git a/applications/solvers/lagrangian/uncoupledKinematicParcelFoam/Make/options b/applications/solvers/lagrangian/uncoupledKinematicParcelFoam/Make/options
index 83ef925..70a14c5 100644
--- a/applications/solvers/lagrangian/uncoupledKinematicParcelFoam/Make/options
+++ b/applications/solvers/lagrangian/uncoupledKinematicParcelFoam/Make/options
@@ -16,6 +16,7 @@ EXE_LIBS = \
     -lbasicThermophysicalModels \
     -lspecie \
     -lradiation \
+    -lcompressibleTurbulenceModel \
     -lcompressibleRASModels \
     -lcompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/multiphase/cavitatingFoam/Make/options b/applications/solvers/multiphase/cavitatingFoam/Make/options
index 9cb749d..0f2981a 100644
--- a/applications/solvers/multiphase/cavitatingFoam/Make/options
+++ b/applications/solvers/multiphase/cavitatingFoam/Make/options
@@ -8,6 +8,7 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/multiphase/compressibleInterDyMFoam/Make/options b/applications/solvers/multiphase/compressibleInterDyMFoam/Make/options
index af146aa..57457c6 100644
--- a/applications/solvers/multiphase/compressibleInterDyMFoam/Make/options
+++ b/applications/solvers/multiphase/compressibleInterDyMFoam/Make/options
@@ -11,6 +11,7 @@ EXE_INC = \
 EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/multiphase/compressibleInterFoam/Make/options b/applications/solvers/multiphase/compressibleInterFoam/Make/options
index 0e21fc2..9309873 100644
--- a/applications/solvers/multiphase/compressibleInterFoam/Make/options
+++ b/applications/solvers/multiphase/compressibleInterFoam/Make/options
@@ -8,6 +8,7 @@ EXE_INC = \
 EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/multiphase/interDyMFoam/Make/options b/applications/solvers/multiphase/interDyMFoam/Make/options
index b9aa770..c703289 100644
--- a/applications/solvers/multiphase/interDyMFoam/Make/options
+++ b/applications/solvers/multiphase/interDyMFoam/Make/options
@@ -12,6 +12,7 @@ EXE_INC = \
 EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume \
diff --git a/applications/solvers/multiphase/interFoam/Make/options b/applications/solvers/multiphase/interFoam/Make/options
index 0e21fc2..9309873 100644
--- a/applications/solvers/multiphase/interFoam/Make/options
+++ b/applications/solvers/multiphase/interFoam/Make/options
@@ -8,6 +8,7 @@ EXE_INC = \
 EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/multiphase/interPhaseChangeFoam/Make/options b/applications/solvers/multiphase/interPhaseChangeFoam/Make/options
index 24e523f..fb77739 100644
--- a/applications/solvers/multiphase/interPhaseChangeFoam/Make/options
+++ b/applications/solvers/multiphase/interPhaseChangeFoam/Make/options
@@ -9,6 +9,7 @@ EXE_INC = \
 EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/multiphase/multiphaseInterFoam/Make/options b/applications/solvers/multiphase/multiphaseInterFoam/Make/options
index 1fc8217..bd49fd4 100644
--- a/applications/solvers/multiphase/multiphaseInterFoam/Make/options
+++ b/applications/solvers/multiphase/multiphaseInterFoam/Make/options
@@ -13,6 +13,7 @@ EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/solvers/multiphase/twoLiquidMixingFoam/Make/options b/applications/solvers/multiphase/twoLiquidMixingFoam/Make/options
index 0e21fc2..9309873 100644
--- a/applications/solvers/multiphase/twoLiquidMixingFoam/Make/options
+++ b/applications/solvers/multiphase/twoLiquidMixingFoam/Make/options
@@ -8,6 +8,7 @@ EXE_INC = \
 EXE_LIBS = \
     -linterfaceProperties \
     -lincompressibleTransportModels \
+    -lincompressibleTurbulenceModel \
     -lincompressibleRASModels \
     -lincompressibleLESModels \
     -lfiniteVolume
diff --git a/applications/utilities/mesh/generation/blockMesh/Make/options b/applications/utilities/mesh/generation/blockMesh/Make/options
index a5b85e4..9466fa0 100644
--- a/applications/utilities/mesh/generation/blockMesh/Make/options
+++ b/applications/utilities/mesh/generation/blockMesh/Make/options
@@ -5,4 +5,5 @@ EXE_INC = \
 
 EXE_LIBS = \
     -lmeshTools \
+    -lfiniteVolume \
     -ldynamicMesh
diff --git a/applications/utilities/postProcessing/graphics/PV3FoamReader/Allwmake b/applications/utilities/postProcessing/graphics/PV3FoamReader/Allwmake
index c7a80fc..ae856c2 100755
--- a/applications/utilities/postProcessing/graphics/PV3FoamReader/Allwmake
+++ b/applications/utilities/postProcessing/graphics/PV3FoamReader/Allwmake
@@ -12,6 +12,11 @@ then
          mkdir -p Make/$WM_OPTIONS > /dev/null 2>&1
          cd Make/$WM_OPTIONS
          cmake ../..
+	 if [ $WM_ARCH == "darwinPpc" -o $WM_ARCH == "darwinIntel"  -o $WM_ARCH == "darwinIntel64" ]
+	 then
+	     sed -i bak -e 's/-dynamiclib /& -undefined dynamic_lookup /' CMakeFiles/PV3FoamReader.dir/link.txt	 
+	     sed -i bak -e 's/-dynamiclib /& -undefined dynamic_lookup /' CMakeFiles/PV3FoamReader_SM.dir/link.txt	 
+	 fi
          make
       )
       ;;
diff --git a/applications/utilities/postProcessing/graphics/ensightFoamReader/Allwmake b/applications/utilities/postProcessing/graphics/ensightFoamReader/Allwmake
old mode 100644
new mode 100755
diff --git a/bin/addr2line4Mac.py b/bin/addr2line4Mac.py
new file mode 100755
index 0000000..7a97c15
--- /dev/null
+++ b/bin/addr2line4Mac.py
@@ -0,0 +1,30 @@
+#! /usr/bin/python
+
+import sys
+filename=sys.argv[1]
+address=sys.argv[2]
+import re
+
+import subprocess
+
+p = subprocess.Popen("gdb -batch -x /dev/stdin",
+                     shell=True,
+                     bufsize=0,
+                     stdin=subprocess.PIPE,
+                     stdout=subprocess.PIPE,
+                     close_fds=True)
+
+(child_stdin, child_stdout) = (p.stdin, p.stdout)
+child_stdin.write("set sharedlibrary preload-libraries no\n")
+child_stdin.write("file "+filename+"\n")
+child_stdin.write("info line *"+address+"\n")
+result=child_stdout.readline()
+
+answer="??:0"
+
+match=re.compile('Line (.+) of "(.+)" starts at').match(result)
+if match:
+    answer=match.group(2)+":"+match.group(1)
+print answer,
+
+sys.exit(255)
diff --git a/bin/foamCleanPath b/bin/foamCleanPath
index dca96f4..0ee9d6d 100755
--- a/bin/foamCleanPath
+++ b/bin/foamCleanPath
@@ -99,12 +99,15 @@ do
         #- no duplicate dirs
         duplicate=`echo " $dirList " | sed -ne "s@ $dir @DUP@p"`
 
-        if [ ! "$duplicate" ]
-        then
-            dirList="$dirList $dir"
-        fi
+	if [[ ! $dir =~ "OpenFOAM-1.5" ]]
+	    then
+	    if [ ! "$duplicate" ]
+		then
+		dirList="$dirList $dir"
+	    fi
+	fi
     elif [ "$strip" != "true" ]
-    then
+	then
         # Print non-existing directories if not in 'strip' mode.
         dirList="$dirList $dir"
     fi
diff --git a/etc/apps/paraview3/bashrc b/etc/apps/paraview3/bashrc
index 354687e..2743d03 100644
--- a/etc/apps/paraview3/bashrc
+++ b/etc/apps/paraview3/bashrc
@@ -62,12 +62,31 @@ then
     else
         export PYTHONPATH=$paraviewPython:$ParaView_DIR/lib/$paraviewMajor
     fi
+    if [ "$WM_ARCH_BASE" == "darwin" ]
+    then
+       export PYTHONPATH=$PYTHONPATH:$ParaView_DIR/bin
+    fi
 fi
 
 if [ -r $ParaView_DIR ]
 then
     export PATH=$ParaView_DIR/bin:$PATH
     export PV_PLUGIN_PATH=$FOAM_LIBBIN
+    if [ "$WM_ARCH_BASE" == "darwin" ]
+	then
+        export PATH=$ParaView_DIR/bin/paraview.app/Contents/MacOS:$PATH
+	export DYLD_LIBRARY_PATH=$ParaView_DIR/bin:$DYLD_LIBRARY_PATH
+	export PV_PLUGIN_PATH=$FOAM_LIBBIN/paraview
+	if [ ! -e $PV_PLUGIN_PATH ]
+	    then
+	    echo "Creating $PV_PLUGIN_PATH"
+	    mkdir $PV_PLUGIN_PATH
+	fi
+	for i in $(find $FOAM_LIBBIN -depth 1 -name "libPV*")
+	do
+	  ln -sf $i $PV_PLUGIN_PATH
+	done
+    fi
 fi
 
 unset cmake paraviewMajor paraviewPython
diff --git a/etc/bashrc b/etc/bashrc
index 0c46057..d62b7e5 100644
--- a/etc/bashrc
+++ b/etc/bashrc
@@ -192,6 +192,46 @@ SunOS)
     export WM_MPLIB=FJMPI
     ;;
 
+Darwin)
+    export WM_ARCH_BASE=darwin
+    case `uname -p` in
+    powerpc)
+	export WM_ARCH=darwinPpc
+	;;
+    i386)
+	export WM_ARCH=darwinIntel
+        case $WM_ARCH_OPTION in
+        32)
+            export WM_COMPILER_ARCH='-64'
+            export WM_CC='gcc-mp-4.3'
+            export WM_CXX='g++-mp-4.3'
+            export WM_CFLAGS='-m32 -fPIC'
+            export WM_CXXFLAGS='-m32 -fPIC'
+            export WM_LDFLAGS='-m32'
+            ;;
+        64)
+            WM_ARCH=darwinIntel64
+            export WM_COMPILER_LIB_ARCH=64
+            export WM_CC='gcc-mp-4.3'
+            export WM_CXX='g++-mp-4.3'
+            export WM_CFLAGS='-m64 -fPIC'
+            export WM_CXXFLAGS='-m64 -fPIC'
+            export WM_LDFLAGS='-m64'
+            ;;
+        *)
+            echo Unknown WM_ARCH_OPTION $WM_ARCH_OPTION, should be 32 or 64
+            ;;
+        esac
+	;;
+    *)
+        echo "Unknown architecture "`uname -p` "for Darwin"
+    esac
+
+    export WM_COMPILER=
+    export WM_MPLIB=OPENMPI
+
+    MACOSX_DEPLOYMENT_TARGET="10.4"
+    ;;
 *)    	# an unsupported operating system
     cat <<USAGE
 
@@ -212,6 +252,10 @@ cleanEnv=`$cleanProg "$PATH" "$foamOldDirs"` && PATH="$cleanEnv"
 
 #- Clean LD_LIBRARY_PATH
 cleanEnv=`$cleanProg "$LD_LIBRARY_PATH" "$foamOldDirs"` && LD_LIBRARY_PATH="$cleanEnv"
+if [[ `uname -s` == "Darwin" ]] 
+then
+    cleanEnv=`$cleanProg "$DYLD_LIBRARY_PATH" "$foamOldDirs"` && DYLD_LIBRARY_PATH="$cleanEnv"
+fi
 
 #- Clean MANPATH
 cleanEnv=`$cleanProg "$MANPATH" "$foamCleanDirs"` && MANPATH="$cleanEnv"
diff --git a/etc/controlDict b/etc/controlDict
index a76ef3c..f012168 100644
--- a/etc/controlDict
+++ b/etc/controlDict
@@ -18,7 +18,7 @@ FoamFile
 
 Documentation
 {
-    docBrowser      "kde-open %f";
+    docBrowser      "open %f";
     doxyDocDirs
     (
         "$WM_PROJECT_USER_DIR/Doxygen/html"
diff --git a/etc/settings.sh b/etc/settings.sh
index 9d39e1e..d20ccec 100644
--- a/etc/settings.sh
+++ b/etc/settings.sh
@@ -47,6 +47,10 @@ _foamAddLib()
     while [ $# -ge 1 ]
     do
         export LD_LIBRARY_PATH=$1:$LD_LIBRARY_PATH
+	if [ "$WM_ARCH_BASE" == "darwin" ]	    
+	then
+	    export DYLD_LIBRARY_PATH=$1:$DYLD_LIBRARY_PATH
+	fi
         shift
     done
 }
@@ -95,7 +99,8 @@ unset compilerBin compilerLib
 # Select compiler installation
 # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 # compilerInstall = OpenFOAM | System
-compilerInstall=OpenFOAM
+# compilerInstall=OpenFOAM
+compilerInstall=System
 
 case "${compilerInstall:-OpenFOAM}" in
 OpenFOAM)
diff --git a/src/OSspecific/POSIX/clockTime/clockTime.H b/src/OSspecific/POSIX/clockTime/clockTime.H
index 0842dc5..907423c 100644
--- a/src/OSspecific/POSIX/clockTime/clockTime.H
+++ b/src/OSspecific/POSIX/clockTime/clockTime.H
@@ -38,6 +38,9 @@ SourceFiles
 #define clockTime_H
 
 #include <sys/types.h>
+#ifdef darwin
+#include <sys/time.h>
+#endif
 
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
diff --git a/src/OSspecific/POSIX/fileStat.C b/src/OSspecific/POSIX/fileStat.C
index c71274d..f75563d 100644
--- a/src/OSspecific/POSIX/fileStat.C
+++ b/src/OSspecific/POSIX/fileStat.C
@@ -30,7 +30,9 @@ License
 
 #include <signal.h>
 #include <unistd.h>
+#ifndef darwin
 #include <sys/sysmacros.h>
+#endif
 
 // * * * * * * * * * * * * * * * * Constructors  * * * * * * * * * * * * * * //
 
diff --git a/src/OSspecific/POSIX/printStack.C b/src/OSspecific/POSIX/printStack.C
index a6c2743..7e63da8 100644
--- a/src/OSspecific/POSIX/printStack.C
+++ b/src/OSspecific/POSIX/printStack.C
@@ -32,8 +32,11 @@ License
 #include "readHexLabel.H"
 
 #include <cxxabi.h>
+#ifndef darwin
 #include <execinfo.h>
+#endif
 #include <dlfcn.h>
+#include <string.h>
 
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
@@ -54,11 +57,22 @@ string pOpen(const string &cmd, label line=0)
         for (label cnt = 0; cnt <= line; cnt++)
         {
             char buffer[MAX];
+
             char* s = fgets(buffer, MAX-1, cmdPipe);
 
             if (s == NULL)
             {
+#ifdef darwin
+                // workaround for the Python-Script
+                for(int i=0;i<MAX;i++) {
+                    if(buffer[i]=='\n') {
+                        buffer[i]='\0';
+                    }
+                }
+                return buffer;
+#else
                 return "";
+#endif
             }
 
             if (cnt == line)
@@ -87,7 +101,11 @@ void printSourceFileAndLine
 {
     word myAddress = address;
 
+#ifndef darwin
     if (filename.ext() == "so")
+#else
+    if (filename.ext() == "dylib")
+#endif
     {
         // Convert offset into .so into offset into executable.
 
@@ -98,7 +116,7 @@ void printSourceFileAndLine
 
         dladdr(addr, &info);
 
-        unsigned long offset = ulong(info.dli_fbase);
+        unsigned long offset = (unsigned long)(info.dli_fbase);
 
         IStringStream addressStr(address.substr(2));
         label addressValue = readHexLabel(addressStr);
@@ -114,7 +132,11 @@ void printSourceFileAndLine
     {
         string line = pOpen
         (
+#ifndef darwin
             "addr2line -f --demangle=auto --exe "
+#else
+            "addr2line4Mac.py "
+#endif
           + filename
           + " "
           + myAddress,
@@ -153,7 +175,11 @@ void getSymbolForRaw
     {
         string fcnt = pOpen
         (
+#ifndef darwin
             "addr2line -f --demangle=auto --exe "
+#else
+            "addr2line4Mac.py "
+#endif
           + filename
           + " "
           + address
@@ -168,6 +194,102 @@ void getSymbolForRaw
     os << "Uninterpreted: " << raw.c_str();
 }
 
+#ifdef darwin
+
+// Trying to emulate the original backtrace and backtrace_symbol from the glibc
+// After an idea published by Rush Manbert at http://lists.apple.com/archives/xcode-users/2006/Apr/msg00528.html
+
+template<int level>
+void *getStackAddress() 
+{
+    const unsigned int stackLevel=level;
+    return (
+        __builtin_frame_address(level) 
+        ? __builtin_return_address(stackLevel)
+        : (void *)0
+    );
+};
+
+#define GET_STACK_ADDRESS(lvl)              \
+    case lvl: {return getStackAddress<lvl>(); break; }
+
+// please don't laugh. For some reason this is necessary (the compiler won't accept it otherwise)
+void *getStackAddress(int level)
+{
+    switch(level) {
+        GET_STACK_ADDRESS(0);
+        GET_STACK_ADDRESS(1);
+        GET_STACK_ADDRESS(2);
+        GET_STACK_ADDRESS(3);
+        GET_STACK_ADDRESS(4);
+        GET_STACK_ADDRESS(5);
+        GET_STACK_ADDRESS(6);
+        GET_STACK_ADDRESS(7);
+        GET_STACK_ADDRESS(8);
+        GET_STACK_ADDRESS(9);
+        GET_STACK_ADDRESS(10);
+        GET_STACK_ADDRESS(11);
+        GET_STACK_ADDRESS(12);
+        GET_STACK_ADDRESS(13);
+        GET_STACK_ADDRESS(14);
+        GET_STACK_ADDRESS(15);
+        GET_STACK_ADDRESS(16);
+        GET_STACK_ADDRESS(17);
+        GET_STACK_ADDRESS(18);
+        GET_STACK_ADDRESS(19);
+        GET_STACK_ADDRESS(20);
+        GET_STACK_ADDRESS(21);
+        default:
+            return (void *)0;
+            break;
+    }
+}
+
+unsigned backtrace(void **bt, unsigned maxAddrs) 
+{
+    unsigned valid=0;
+    bool ok=true;
+
+    for(int level=0;level<maxAddrs;level++) {
+        if(ok) {
+            bt[level]=getStackAddress(level);
+            
+            if(bt[level]!=(void *)0) {
+                valid=level;
+            } else {
+                ok=false;
+            }
+        } else {
+            bt[level]=(void *)0;
+        }
+    }
+
+    return valid;
+}
+
+// This function is a potential memory leak. But I don't care because the program is terminating anyway
+char **backtrace_symbols(void **bt,unsigned nr) 
+{
+    char **strings=(char **)malloc(sizeof(char *)*nr);
+
+    for(unsigned i=0;i<nr;i++) {
+        Dl_info info;
+        int result=dladdr(bt[i],&info);
+
+        char tmp[1000];
+#ifdef darwinIntel64
+        sprintf(tmp,"%s(%s+%p) [%p]",info.dli_fname,info.dli_sname,(void *)((unsigned long)bt[i]-(unsigned long)info.dli_saddr),bt[i]);
+#else
+        sprintf(tmp,"%s(%s+%p) [%p]",info.dli_fname,info.dli_sname,(void *)((unsigned int)bt[i]-(unsigned int)info.dli_saddr),bt[i]);
+#endif
+        strings[i]=(char *)malloc(strlen(tmp)+1);
+        strcpy(strings[i],tmp);
+    }
+
+    return strings;
+}
+
+#endif
 
 void error::printStack(Ostream& os)
 {
diff --git a/src/OpenFOAM/db/dlLibraryTable/dlLibraryTable.C b/src/OpenFOAM/db/dlLibraryTable/dlLibraryTable.C
index 96515eb..37bf236 100644
--- a/src/OpenFOAM/db/dlLibraryTable/dlLibraryTable.C
+++ b/src/OpenFOAM/db/dlLibraryTable/dlLibraryTable.C
@@ -71,6 +71,13 @@ bool Foam::dlLibraryTable::open(const fileName& functionLibName)
         void* functionLibPtr = 
             dlopen(functionLibName.c_str(), RTLD_LAZY|RTLD_GLOBAL);
 
+#ifdef darwin
+        if(!functionLibPtr && functionLibName.ext()=="so") {
+            fileName lName=functionLibName.lessExt()+".dylib";
+            functionLibPtr = 
+                dlopen(lName.c_str(), RTLD_LAZY|RTLD_GLOBAL);
+        }
+#endif
         if (!functionLibPtr)
         {
             WarningIn
diff --git a/src/OpenFOAM/primitives/Scalar/doubleFloat.H b/src/OpenFOAM/primitives/Scalar/doubleFloat.H
index cec1d83..c7e26d4 100644
--- a/src/OpenFOAM/primitives/Scalar/doubleFloat.H
+++ b/src/OpenFOAM/primitives/Scalar/doubleFloat.H
@@ -32,6 +32,16 @@ License
 
 #include <cmath>
 
+#ifndef DUMMY_SCALAR_FUNCTIONS
+#define DUMMY_SCALAR_FUNCTIONS
+inline float j0f(float x) { return float(j0(double(x)));}
+inline float j1f(float x) { return float(j1(double(x)));}
+inline float y0f(float x) { return float(y0(double(x)));}
+inline float y1f(float x) { return float(y1(double(x)));}
+inline float jnf(const int n, const float s) { return float(jn(n, double(s))); }
+inline float ynf(const int n, const float s) { return float(yn(n, double(s))); }
+#endif
+ 
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
 namespace Foam
diff --git a/src/autoMesh/autoHexMesh/autoHexMeshDriver/autoRefineDriver.C b/src/autoMesh/autoHexMesh/autoHexMeshDriver/autoRefineDriver.C
index 0ac24a5..4688d37 100644
--- a/src/autoMesh/autoHexMesh/autoHexMeshDriver/autoRefineDriver.C
+++ b/src/autoMesh/autoHexMesh/autoHexMeshDriver/autoRefineDriver.C
@@ -245,6 +245,8 @@ Foam::label Foam::autoRefineDriver::surfaceOnlyRefine
 
         const PtrList<featureEdgeMesh> dummyFeatures;
 
+        PtrList<featureEdgeMesh> dummy(0);
+
         labelList candidateCells
         (
             meshRefiner_.refineCandidates
@@ -388,6 +390,8 @@ Foam::label Foam::autoRefineDriver::shellRefine
 
         const PtrList<featureEdgeMesh> dummyFeatures;
 
+        PtrList<featureEdgeMesh> dummy(0);
+
         labelList candidateCells
         (
             meshRefiner_.refineCandidates
diff --git a/src/conversion/ensight/part/ensightPart.C b/src/conversion/ensight/part/ensightPart.C
index c02f6c9..e639bef 100644
--- a/src/conversion/ensight/part/ensightPart.C
+++ b/src/conversion/ensight/part/ensightPart.C
@@ -51,7 +51,7 @@ bool Foam::ensightPart::isFieldDefined(const List<scalar>& field) const
         {
             label id = idList[i];
 
-            if (id >= field.size() || isnan(field[id]))
+            if (id >= field.size() || std::isnan(field[id]))
             {
                 return false;
             }
diff --git a/src/conversion/ensight/part/ensightPartIO.C b/src/conversion/ensight/part/ensightPartIO.C
index 4446fbb..99f2e21 100644
--- a/src/conversion/ensight/part/ensightPartIO.C
+++ b/src/conversion/ensight/part/ensightPartIO.C
@@ -62,7 +62,7 @@ void Foam::ensightPart::writeFieldList
 {
     forAll(idList, i)
     {
-        if (idList[i] >= field.size() || isnan(field[idList[i]]))
+        if (idList[i] >= field.size() || std::isnan(field[idList[i]]))
         {
             os.writeUndef();
         }
diff --git a/src/dynamicMesh/fvMeshDistribute/fvMeshDistributeTemplates.C b/src/dynamicMesh/fvMeshDistribute/fvMeshDistributeTemplates.C
index d57f59c..0382b91 100644
--- a/src/dynamicMesh/fvMeshDistribute/fvMeshDistributeTemplates.C
+++ b/src/dynamicMesh/fvMeshDistribute/fvMeshDistributeTemplates.C
@@ -291,7 +291,7 @@ void Foam::fvMeshDistribute::sendFields
         // Send all fieldNames. This has to be exactly the same set as is
         // being received!
         const GeoField& fld =
-            subsetter.baseMesh().lookupObject<GeoField>(fieldNames[i]);
+            subsetter.baseMesh().objectRegistry::lookupObject<GeoField>(fieldNames[i]);
 
         tmp<GeoField> tsubfld = subsetter.interpolate(fld);
 
diff --git a/wmake/Makefile b/wmake/Makefile
index 28b7015..0f76ee5 100644
--- a/wmake/Makefile
+++ b/wmake/Makefile
@@ -93,7 +93,11 @@ EXE_DEP         = $(OBJECTS_DIR)/options
 LIB             = libNULL
 
 # Shared library extension
+ifeq ($(WM_ARCH_BASE),darwin)
+SO              = dylib
+else
 SO              = so
+endif
 
 # Project executable
 EXE             = $(WM_PROJECT).out
@@ -171,8 +175,13 @@ libso:   $(LIB).$(SO)
 $(LIB).$(SO): $(OBJECTS)
 	     @$(WM_SCRIPTS)/mkObjectDir $(LIB)
 	     @rm -f so_locations
+ifeq ($(WM_ARCH_BASE),darwin)
+	     @cd $(OBJECTS_DIR) ; \
+	     $(LINKLIBSO) $(LOCAL_OBJECTS) -L$(LIB_WM_OPTIONS_DIR) $(LIB_LIBS) $(GLIB_LIBS) -install_name $(notdir $(LIB)).$(SO) -o $(LIB).$(SO)
+else
 	     @cd $(OBJECTS_DIR) ; \
 	     $(LINKLIBSO) $(LOCAL_OBJECTS) -L$(LIB_WM_OPTIONS_DIR) $(LIB_LIBS) $(GLIB_LIBS) -o $(LIB).$(SO)
+endif
 
 lib:     $(LIB).a
 	     @echo \'$(LIB).a\' is up to date.
diff --git a/wmake/rules/darwinIntel/X b/wmake/rules/darwinIntel/X
new file mode 100644
index 0000000..bed8bfe
--- /dev/null
+++ b/wmake/rules/darwinIntel/X
@@ -0,0 +1,3 @@
+XFLAGS     =
+XINC       = $(XFLAGS) -I/usr/X11R6/include
+XLIBS      = -L/usr/X11R6/lib -lXext -lX11
diff --git a/wmake/rules/darwinIntel/c b/wmake/rules/darwinIntel/c
new file mode 100644
index 0000000..cde413e
--- /dev/null
+++ b/wmake/rules/darwinIntel/c
@@ -0,0 +1,16 @@
+.SUFFIXES: .c .h
+
+cWARN        = -Wall
+
+cc          = gcc-mp-4.3
+
+include $(RULES)/c$(WM_COMPILE_OPTION)
+
+cFLAGS      = $(GFLAGS) $(cWARN) $(cOPT) $(cDBUG) $(LIB_HEADER_DIRS) -fPIC -Ddarwin
+
+ctoo        = $(WM_SCHEDULER) $(cc) $(cFLAGS) -c $$SOURCE -o $@
+
+LINK_LIBS   = $(cDBUG)
+
+LINKLIBSO   = $(cc) -dynamiclib  -flat_namespace -undefined suppress
+LINKEXE     = $(cc) -Xlinker -z -Xlinker nodefs
diff --git a/wmake/rules/darwinIntel/c++ b/wmake/rules/darwinIntel/c++
new file mode 100644
index 0000000..1405d90
--- /dev/null
+++ b/wmake/rules/darwinIntel/c++
@@ -0,0 +1,21 @@
+.SUFFIXES: .C .cxx .cc .cpp
+
+c++WARN     = -Wall -Wno-strict-aliasing -Wextra -Wno-unused-parameter -Wold-style-cast
+
+CC          = g++-mp-4.3
+
+include $(RULES)/c++$(WM_COMPILE_OPTION)
+
+ptFLAGS     = -DNoRepository -ftemplate-depth-40
+
+c++FLAGS    = $(GFLAGS) $(c++WARN) $(c++OPT) $(c++DBUG) $(ptFLAGS) $(LIB_HEADER_DIRS) -fPIC -Ddarwin
+
+Ctoo        = $(WM_SCHEDULER) $(CC) $(c++FLAGS) -c $$SOURCE -o $@
+cxxtoo      = $(Ctoo)
+cctoo       = $(Ctoo)
+cpptoo      = $(Ctoo)
+
+LINK_LIBS   = $(c++DBUG) -lpthread
+
+LINKLIBSO   = $(CC) $(c++FLAGS) -lpthread -dynamiclib -undefined dynamic_lookup
+LINKEXE     = $(CC) $(c++FLAGS) -lpthread -L$(FOAM_LIBBIN) -lOpenFOAM -L$(FOAM_MPI_LIBBIN) -lPstream
diff --git a/wmake/rules/darwinIntel/c++Debug b/wmake/rules/darwinIntel/c++Debug
new file mode 100644
index 0000000..19bdb9c
--- /dev/null
+++ b/wmake/rules/darwinIntel/c++Debug
@@ -0,0 +1,2 @@
+c++DBUG    = -ggdb3 -DFULLDEBUG
+c++OPT      = -O0 -fdefault-inline
diff --git a/wmake/rules/darwinIntel/c++Opt b/wmake/rules/darwinIntel/c++Opt
new file mode 100644
index 0000000..8ac07d2
--- /dev/null
+++ b/wmake/rules/darwinIntel/c++Opt
@@ -0,0 +1,4 @@
+c++DBUG     = 
+c++OPT      = -O3
+#c++OPT      = -march=nocona -O3
+# -ftree-vectorize -ftree-vectorizer-verbose=3
diff --git a/wmake/rules/darwinIntel/c++Prof b/wmake/rules/darwinIntel/c++Prof
new file mode 100644
index 0000000..3bda4da
--- /dev/null
+++ b/wmake/rules/darwinIntel/c++Prof
@@ -0,0 +1,2 @@
+c++DBUG    = -pg
+c++OPT     = -O2
diff --git a/wmake/rules/darwinIntel/cDebug b/wmake/rules/darwinIntel/cDebug
new file mode 100644
index 0000000..72b638f
--- /dev/null
+++ b/wmake/rules/darwinIntel/cDebug
@@ -0,0 +1,2 @@
+cDBUG       = -ggdb -DFULLDEBUG
+cOPT        = -O1 -fdefault-inline -finline-functions
diff --git a/wmake/rules/darwinIntel/cOpt b/wmake/rules/darwinIntel/cOpt
new file mode 100644
index 0000000..a8b0635
--- /dev/null
+++ b/wmake/rules/darwinIntel/cOpt
@@ -0,0 +1,2 @@
+cDBUG       = 
+cOPT        = -O3
diff --git a/wmake/rules/darwinIntel/cProf b/wmake/rules/darwinIntel/cProf
new file mode 100644
index 0000000..ca3ac9b
--- /dev/null
+++ b/wmake/rules/darwinIntel/cProf
@@ -0,0 +1,2 @@
+cDBUG       = -pg
+cOPT        = -O2
diff --git a/wmake/rules/darwinIntel/general b/wmake/rules/darwinIntel/general
new file mode 100644
index 0000000..4c3abf8
--- /dev/null
+++ b/wmake/rules/darwinIntel/general
@@ -0,0 +1,10 @@
+CPP        = cpp-mp-4.3 $(GFLAGS)
+LD         = ld
+
+PROJECT_LIBS = -l$(WM_PROJECT)
+
+include $(GENERAL_RULES)/standard
+
+include $(RULES)/X
+include $(RULES)/c
+include $(RULES)/c++
diff --git a/wmake/rules/darwinIntel/mplib b/wmake/rules/darwinIntel/mplib
new file mode 100644
index 0000000..8a84b40
--- /dev/null
+++ b/wmake/rules/darwinIntel/mplib
@@ -0,0 +1,3 @@
+PFLAGS     = 
+PINC       = 
+PLIBS      = 
diff --git a/wmake/rules/darwinIntel/mplibOPENMPI b/wmake/rules/darwinIntel/mplibOPENMPI
new file mode 100644
index 0000000..834d2d3
--- /dev/null
+++ b/wmake/rules/darwinIntel/mplibOPENMPI
@@ -0,0 +1,3 @@
+PFLAGS     = -DOMPI_SKIP_MPICXX
+PINC       = -I$(MPI_ARCH_PATH)/include
+PLIBS      = -L$(MPI_ARCH_PATH)/lib -lmpi
diff --git a/wmake/rules/darwinIntel64/X b/wmake/rules/darwinIntel64/X
new file mode 100644
index 0000000..bed8bfe
--- /dev/null
+++ b/wmake/rules/darwinIntel64/X
@@ -0,0 +1,3 @@
+XFLAGS     =
+XINC       = $(XFLAGS) -I/usr/X11R6/include
+XLIBS      = -L/usr/X11R6/lib -lXext -lX11
diff --git a/wmake/rules/darwinIntel64/c b/wmake/rules/darwinIntel64/c
new file mode 100644
index 0000000..026904e
--- /dev/null
+++ b/wmake/rules/darwinIntel64/c
@@ -0,0 +1,16 @@
+.SUFFIXES: .c .h
+
+cWARN        = -Wall
+
+cc          = gcc-mp-4.3 -m64
+
+include $(RULES)/c$(WM_COMPILE_OPTION)
+
+cFLAGS      = $(GFLAGS) $(cWARN) $(cOPT) $(cDBUG) $(LIB_HEADER_DIRS) -fPIC -Ddarwin
+
+ctoo        = $(WM_SCHEDULER) $(cc) $(cFLAGS) -c $$SOURCE -o $@
+
+LINK_LIBS   = $(cDBUG)
+
+LINKLIBSO   = $(cc) -dynamiclib  -flat_namespace -undefined suppress
+LINKEXE     = $(cc) -Xlinker -z -Xlinker nodefs
diff --git a/wmake/rules/darwinIntel64/c++ b/wmake/rules/darwinIntel64/c++
new file mode 100644
index 0000000..e4e181d
--- /dev/null
+++ b/wmake/rules/darwinIntel64/c++
@@ -0,0 +1,22 @@
+.SUFFIXES: .C .cxx .cc .cpp
+
+c++WARN     = -Wall -Wno-strict-aliasing -Wextra -Wno-unused-parameter -Wold-style-cast
+
+CC          = g++-mp-4.3 -m64
+
+include $(RULES)/c++$(WM_COMPILE_OPTION)
+
+ptFLAGS     = -DNoRepository -ftemplate-depth-40
+
+c++FLAGS    = $(GFLAGS) $(c++WARN) $(c++OPT) $(c++DBUG) $(ptFLAGS) $(LIB_HEADER_DIRS) -fPIC -Ddarwin
+
+Ctoo        = $(WM_SCHEDULER) $(CC) $(c++FLAGS) -c $$SOURCE -o $@
+cxxtoo      = $(Ctoo)
+cctoo       = $(Ctoo)
+cpptoo      = $(Ctoo)
+
+LINK_LIBS   = $(c++DBUG) -lpthread
+
+LINKLIBSO   = $(CC) $(c++FLAGS) -lpthread -dynamiclib -undefined dynamic_lookup
+# LINKEXE     = $(CC) $(c++FLAGS) -lpthread -L$(FOAM_LIBBIN) -lOpenFOAM -L$(FOAM_MPI_LIBBIN) -lPstream
+LINKEXE     = $(CC) $(c++FLAGS) -lpthread -L$(FOAM_MPI_LIBBIN) -lPstream
diff --git a/wmake/rules/darwinIntel64/c++Debug b/wmake/rules/darwinIntel64/c++Debug
new file mode 100644
index 0000000..19bdb9c
--- /dev/null
+++ b/wmake/rules/darwinIntel64/c++Debug
@@ -0,0 +1,2 @@
+c++DBUG    = -ggdb3 -DFULLDEBUG
+c++OPT      = -O0 -fdefault-inline
diff --git a/wmake/rules/darwinIntel64/c++Opt b/wmake/rules/darwinIntel64/c++Opt
new file mode 100644
index 0000000..8ac07d2
--- /dev/null
+++ b/wmake/rules/darwinIntel64/c++Opt
@@ -0,0 +1,4 @@
+c++DBUG     = 
+c++OPT      = -O3
+#c++OPT      = -march=nocona -O3
+# -ftree-vectorize -ftree-vectorizer-verbose=3
diff --git a/wmake/rules/darwinIntel64/c++Prof b/wmake/rules/darwinIntel64/c++Prof
new file mode 100644
index 0000000..3bda4da
--- /dev/null
+++ b/wmake/rules/darwinIntel64/c++Prof
@@ -0,0 +1,2 @@
+c++DBUG    = -pg
+c++OPT     = -O2
diff --git a/wmake/rules/darwinIntel64/cDebug b/wmake/rules/darwinIntel64/cDebug
new file mode 100644
index 0000000..72b638f
--- /dev/null
+++ b/wmake/rules/darwinIntel64/cDebug
@@ -0,0 +1,2 @@
+cDBUG       = -ggdb -DFULLDEBUG
+cOPT        = -O1 -fdefault-inline -finline-functions
diff --git a/wmake/rules/darwinIntel64/cOpt b/wmake/rules/darwinIntel64/cOpt
new file mode 100644
index 0000000..a8b0635
--- /dev/null
+++ b/wmake/rules/darwinIntel64/cOpt
@@ -0,0 +1,2 @@
+cDBUG       = 
+cOPT        = -O3
diff --git a/wmake/rules/darwinIntel64/cProf b/wmake/rules/darwinIntel64/cProf
new file mode 100644
index 0000000..ca3ac9b
--- /dev/null
+++ b/wmake/rules/darwinIntel64/cProf
@@ -0,0 +1,2 @@
+cDBUG       = -pg
+cOPT        = -O2
diff --git a/wmake/rules/darwinIntel64/general b/wmake/rules/darwinIntel64/general
new file mode 100644
index 0000000..4c3abf8
--- /dev/null
+++ b/wmake/rules/darwinIntel64/general
@@ -0,0 +1,10 @@
+CPP        = cpp-mp-4.3 $(GFLAGS)
+LD         = ld
+
+PROJECT_LIBS = -l$(WM_PROJECT)
+
+include $(GENERAL_RULES)/standard
+
+include $(RULES)/X
+include $(RULES)/c
+include $(RULES)/c++
diff --git a/wmake/rules/darwinIntel64/mplib b/wmake/rules/darwinIntel64/mplib
new file mode 100644
index 0000000..8a84b40
--- /dev/null
+++ b/wmake/rules/darwinIntel64/mplib
@@ -0,0 +1,3 @@
+PFLAGS     = 
+PINC       = 
+PLIBS      = 
diff --git a/wmake/rules/darwinIntel64/mplibOPENMPI b/wmake/rules/darwinIntel64/mplibOPENMPI
new file mode 100644
index 0000000..834d2d3
--- /dev/null
+++ b/wmake/rules/darwinIntel64/mplibOPENMPI
@@ -0,0 +1,3 @@
+PFLAGS     = -DOMPI_SKIP_MPICXX
+PINC       = -I$(MPI_ARCH_PATH)/include
+PLIBS      = -L$(MPI_ARCH_PATH)/lib -lmpi
diff --git a/wmake/rules/darwinPpc/X b/wmake/rules/darwinPpc/X
new file mode 100644
index 0000000..bed8bfe
--- /dev/null
+++ b/wmake/rules/darwinPpc/X
@@ -0,0 +1,3 @@
+XFLAGS     =
+XINC       = $(XFLAGS) -I/usr/X11R6/include
+XLIBS      = -L/usr/X11R6/lib -lXext -lX11
diff --git a/wmake/rules/darwinPpc/c b/wmake/rules/darwinPpc/c
new file mode 100644
index 0000000..ac60609
--- /dev/null
+++ b/wmake/rules/darwinPpc/c
@@ -0,0 +1,16 @@
+.SUFFIXES: .c .h
+
+cWARN        = -Wall
+
+cc          = gcc 
+
+include $(RULES)/c$(WM_COMPILE_OPTION)
+
+cFLAGS      = $(GFLAGS) $(cWARN) $(cOPT) $(cDBUG) $(LIB_HEADER_DIRS) -fPIC -Ddarwin
+
+ctoo        = $(WM_SCHEDULER) $(cc) $(cFLAGS) -c $$SOURCE -o $@
+
+LINK_LIBS   = $(cDBUG)
+
+LINKLIBSO   = $(cc) -dynamiclib  -flat_namespace -undefined suppress
+LINKEXE     = $(cc) -Xlinker -z -Xlinker nodefs
diff --git a/wmake/rules/darwinPpc/c++ b/wmake/rules/darwinPpc/c++
new file mode 100644
index 0000000..52ed729
--- /dev/null
+++ b/wmake/rules/darwinPpc/c++
@@ -0,0 +1,21 @@
+.SUFFIXES: .C .cxx .cc .cpp
+
+c++WARN     = -Wall -Wno-strict-aliasing -Wextra -Wno-unused-parameter -Wold-style-cast
+
+CC          = g++
+
+include $(RULES)/c++$(WM_COMPILE_OPTION)
+
+ptFLAGS     = -DNoRepository -ftemplate-depth-40
+
+c++FLAGS    = $(GFLAGS) $(c++WARN) $(c++OPT) $(c++DBUG) $(ptFLAGS) $(LIB_HEADER_DIRS) -fPIC -Ddarwin
+
+Ctoo        = $(WM_SCHEDULER) $(CC) $(c++FLAGS) -c $$SOURCE -o $@
+cxxtoo      = $(Ctoo)
+cctoo       = $(Ctoo)
+cpptoo      = $(Ctoo)
+
+LINK_LIBS   = $(c++DBUG) -lpthread
+
+LINKLIBSO   = $(CC) $(c++FLAGS) -lpthread -dynamiclib -undefined dynamic_lookup
+LINKEXE     = $(CC) $(c++FLAGS) -lpthread -L$(FOAM_LIBBIN) -lOpenFOAM -L$(FOAM_MPI_LIBBIN) -lPstream
diff --git a/wmake/rules/darwinPpc/c++Debug b/wmake/rules/darwinPpc/c++Debug
new file mode 100644
index 0000000..19bdb9c
--- /dev/null
+++ b/wmake/rules/darwinPpc/c++Debug
@@ -0,0 +1,2 @@
+c++DBUG    = -ggdb3 -DFULLDEBUG
+c++OPT      = -O0 -fdefault-inline
diff --git a/wmake/rules/darwinPpc/c++Opt b/wmake/rules/darwinPpc/c++Opt
new file mode 100644
index 0000000..9ee055a
--- /dev/null
+++ b/wmake/rules/darwinPpc/c++Opt
@@ -0,0 +1,3 @@
+c++DBUG     = 
+c++OPT      = -O3
+# c++OPT      = -O3 -ffast-math -fsignaling-nans
diff --git a/wmake/rules/darwinPpc/c++Prof b/wmake/rules/darwinPpc/c++Prof
new file mode 100644
index 0000000..3bda4da
--- /dev/null
+++ b/wmake/rules/darwinPpc/c++Prof
@@ -0,0 +1,2 @@
+c++DBUG    = -pg
+c++OPT     = -O2
diff --git a/wmake/rules/darwinPpc/cDebug b/wmake/rules/darwinPpc/cDebug
new file mode 100644
index 0000000..72b638f
--- /dev/null
+++ b/wmake/rules/darwinPpc/cDebug
@@ -0,0 +1,2 @@
+cDBUG       = -ggdb -DFULLDEBUG
+cOPT        = -O1 -fdefault-inline -finline-functions
diff --git a/wmake/rules/darwinPpc/cOpt b/wmake/rules/darwinPpc/cOpt
new file mode 100644
index 0000000..a8b0635
--- /dev/null
+++ b/wmake/rules/darwinPpc/cOpt
@@ -0,0 +1,2 @@
+cDBUG       = 
+cOPT        = -O3
diff --git a/wmake/rules/darwinPpc/cProf b/wmake/rules/darwinPpc/cProf
new file mode 100644
index 0000000..ca3ac9b
--- /dev/null
+++ b/wmake/rules/darwinPpc/cProf
@@ -0,0 +1,2 @@
+cDBUG       = -pg
+cOPT        = -O2
diff --git a/wmake/rules/darwinPpc/general b/wmake/rules/darwinPpc/general
new file mode 100644
index 0000000..d450c79
--- /dev/null
+++ b/wmake/rules/darwinPpc/general
@@ -0,0 +1,11 @@
+CPP        = cpp $(WM_CPP_OPTIONS)
+LD         = ld 
+
+PROJECT_LIBS = -l$(WM_PROJECT)
+
+include $(GENERAL_RULES)/standard
+
+include $(RULES)/X
+include $(RULES)/c
+include $(RULES)/c++
+# include $(GENERAL_RULES)/cint
diff --git a/wmake/rules/darwinPpc/mplib b/wmake/rules/darwinPpc/mplib
new file mode 100644
index 0000000..8a84b40
--- /dev/null
+++ b/wmake/rules/darwinPpc/mplib
@@ -0,0 +1,3 @@
+PFLAGS     = 
+PINC       = 
+PLIBS      = 
diff --git a/wmake/rules/darwinPpc/mplibOPENMPI b/wmake/rules/darwinPpc/mplibOPENMPI
new file mode 100644
index 0000000..834d2d3
--- /dev/null
+++ b/wmake/rules/darwinPpc/mplibOPENMPI
@@ -0,0 +1,3 @@
+PFLAGS     = -DOMPI_SKIP_MPICXX
+PINC       = -I$(MPI_ARCH_PATH)/include
+PLIBS      = -L$(MPI_ARCH_PATH)/lib -lmpi
diff --git a/wmake/src/lex.yy.c b/wmake/src/lex.yy.c
deleted file mode 100644
index cf97d90..0000000
Binary files a/wmake/src/lex.yy.c and /dev/null differ
